# Codex Run Log 5

## Summary
- Implemented the web runner package with Playwright selectors, actions, assertions, and smoke tests.
- Added web client support in the orchestrator runtime, plus web integration and sample workflow smoke tests.
- Implemented synthesizer v0 output for selectors/assertions and added fixtures + tests.
- Built verification-mode CLI scaffolding with decision logging and review artifacts.
- Fixed desktop-runner naming drift, screenshot tests, and added failure-path assertions.
- Updated CI, docs, samples, and local test script coverage.

## Files changed
- `.github/workflows/ci.yml`
- `README.md`
- `desktop-runner/tests/test_actions.py`
- `desktop-runner/tests/test_screenshots.py`
- `docs/dsl.md`
- `docs/selector-synthesis.md`
- `docs/verification-mode.md`
- `orchestrator/package.json`
- `orchestrator/package-lock.json`
- `orchestrator/src/cli/run.ts`
- `orchestrator/src/cli/verify.ts`
- `orchestrator/src/config/defaults.ts`
- `orchestrator/src/rpc/contracts.ts`
- `orchestrator/src/rpc/desktopClient.ts`
- `orchestrator/src/rpc/webClient.ts`
- `orchestrator/src/runtime/engine.ts`
- `orchestrator/src/runtime/verification.ts`
- `orchestrator/src/types/workflow.ts`
- `orchestrator/tests/desktopClient.test.ts`
- `orchestrator/tests/engine.test.ts`
- `orchestrator/tests/verify.test.ts`
- `orchestrator/tests/webFlow.test.ts`
- `orchestrator/tests/webIntegration.test.ts`
- `orchestrator/tests/webSampleSmoke.test.ts`
- `packages/shared/src/dsl/schema.step.json`
- `packages/shared/src/types/step.ts`
- `packages/shared/src/types/workflow.ts`
- `scripts/test.ps1`
- `synthesizer/package.json`
- `synthesizer/package-lock.json`
- `synthesizer/tsconfig.json`
- `synthesizer/src/index.ts`
- `synthesizer/src/candidates/desktop.ts`
- `synthesizer/tests/fixtures/recording.jsonl`
- `synthesizer/tests/synthesizer.spec.ts`
- `web-runner/package.json`
- `web-runner/package-lock.json`
- `web-runner/tsconfig.json`
- `web-runner/src/index.ts`
- `web-runner/src/types.ts`
- `web-runner/src/browser/attach.ts`
- `web-runner/src/browser/launch.ts`
- `web-runner/src/selector/resolve.ts`
- `web-runner/src/selector/score.ts`
- `web-runner/src/actions/assert.ts`
- `web-runner/src/actions/click.ts`
- `web-runner/src/actions/extract.ts`
- `web-runner/src/actions/fill.ts`
- `web-runner/src/actions/select.ts`
- `web-runner/src/actions/type.ts`
- `web-runner/src/actions/waitFor.ts`
- `web-runner/src/actions/screenshot.ts`
- `web-runner/src/actions/trace.ts`
- `web-runner/tests/smoke.spec.ts`
- `web-runner/tests/selector.spec.ts`
- `web-runner/test-app/index.html`
- `workflows/samples/web_basic/workflow.json`
- `workflows/samples/web_basic/inputs.json`
- `workflows/samples/web_basic/README.md`
- `workflows/samples/desktop_basic/workflow.json`
- `workflows/samples/desktop_basic/inputs.json`
- `workflows/samples/desktop_basic/README.md`
- Removed duplicate package directory: `desktop-runner/src/desktop-runner/**`

## How to test locally on Windows
```powershell
.\scripts\test.ps1
```

## How to verify behavior manually
- Web sample: update `workflows/samples/web_basic/workflow.json` with a valid file URL to `web-runner/test-app/index.html`, then run the orchestrator CLI.
- Desktop sample: open Notepad and run the workflow in `workflows/samples/desktop_basic/`.

## Known issues / follow-ups
- Web verification artifacts are CLI-only; UI remains to be implemented.
- Focus-window action emits a synthetic trace (desktop runner does not return a StepTrace yet).
